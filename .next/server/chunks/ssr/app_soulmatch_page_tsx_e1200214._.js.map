{"version":3,"sources":["turbopack:///[project]/app/soulmatch/page.tsx"],"sourcesContent":["\"use client\"\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { getZodiacFromDate, getCompatibility, signToElement } from '../../lib/zodiac'\r\nimport { toJulianDay, moonEclipticLongitudeDeg, ascendantDeg, zodiacFromDegrees } from '../../lib/astro'\r\nimport ZodiacAvatar from '../../components/ZodiacAvatar'\r\n\r\nconst SIGNS = ['Aries','Taurus','Gemini','Cancer','Leo','Virgo','Libra','Scorpio','Sagittarius','Capricorn','Aquarius','Pisces']\r\n\r\nfunction parseDateInput(input: string): Date | null {\r\n  if(!input) return null\r\n  input = input.trim()\r\n  // Accept dd-mm-yyyy\r\n  const dmy = /^(\\d{2})-(\\d{2})-(\\d{4})$/.exec(input)\r\n  if(dmy){\r\n    const day = Number(dmy[1])\r\n    const month = Number(dmy[2])\r\n    const year = Number(dmy[3])\r\n    const dt = new Date(Date.UTC(year, month-1, day))\r\n    if(!isNaN(dt.getTime())) return dt\r\n  }\r\n  // Accept yyyy-mm-dd\r\n  const ymd = /^(\\d{4})-(\\d{2})-(\\d{2})$/.exec(input)\r\n  if(ymd){\r\n    const year = Number(ymd[1])\r\n    const month = Number(ymd[2])\r\n    const day = Number(ymd[3])\r\n    const dt = new Date(Date.UTC(year, month-1, day))\r\n    if(!isNaN(dt.getTime())) return dt\r\n  }\r\n  // fallback: try Date constructor\r\n  const tryDt = new Date(input)\r\n  if(!isNaN(tryDt.getTime())) return tryDt\r\n  return null\r\n}\r\n\r\nexport default function SoulMatch(){\r\n  const [yourDobRaw, setYourDobRaw] = useState('')\r\n  const [partnerDobRaw, setPartnerDobRaw] = useState('')\r\n  const [partnerSign, setPartnerSign] = useState('')\r\n  const [timeRaw, setTimeRaw] = useState('')\r\n  const [coordsRaw, setCoordsRaw] = useState('')\r\n  const [unlockDeep, setUnlockDeep] = useState(false)\r\n  const [tone, setTone] = useState<'new'|'confused'|'fight'|'grow' | ''>('')\r\n  const [focus, setFocus] = useState<'communication'|'trust'|'future'|'needs' | ''>('')\r\n  const [result, setResult] = useState<any>(null)\r\n  const [loading, setLoading] = useState(false)\r\n  const loadingRef = useRef<number | null>(null)\r\n  const [miniPlan, setMiniPlan] = useState<string[] | null>(null)\r\n  const [shareSvg, setShareSvg] = useState<string | null>(null)\r\n  const [shareImgUrl, setShareImgUrl] = useState<string | null>(null)\r\n  const [sharing, setSharing] = useState(false)\r\n  const [copySuccess, setCopySuccess] = useState<string | null>(null)\r\n  const [reflection, setReflection] = useState<string | null>(null)\r\n  const [reflectionSubmitted, setReflectionSubmitted] = useState(false)\r\n  const [partnerPerspective, setPartnerPerspective] = useState(false)\r\n  const displayPrimary = result ? (partnerPerspective ? result.partner : result.yours) : null\r\n  const displayOther = result ? (partnerPerspective ? result.yours : result.partner) : null\r\n\r\n  // Try to resolve a place name to coordinates using OpenStreetMap Nominatim (client-side).\r\n  // Returns { lat, lon } or null.\r\n  async function resolveCoordsFromPlace(q: string){\r\n    if(!q) return null\r\n    // quick check if user already provided lat,lon\r\n    const cm = /(-?\\d+(?:\\.\\d+)?),\\s*(-?\\d+(?:\\.\\d+)?)/.exec(q)\r\n    if(cm) return { lat: Number(cm[1]), lon: Number(cm[2]) }\r\n    try{\r\n      const url = 'https://nominatim.openstreetmap.org/search?format=json&limit=1&q=' + encodeURIComponent(q)\r\n      const res = await fetch(url, { headers: { 'Accept': 'application/json' } })\r\n      const body = await res.json()\r\n      if(Array.isArray(body) && body.length > 0){\r\n        const it = body[0]\r\n        if(it && it.lat && it.lon) return { lat: Number(it.lat), lon: Number(it.lon) }\r\n      }\r\n    }catch(e){\r\n      // ignore network errors ‚Äî fallback to null\r\n    }\r\n    return null\r\n  }\r\n\r\n  function buildReport(yours: any, partner: any, compatibility: any, toneChoice: string, focusChoice: string, perspective: 'you'|'partner' = 'you'){\r\n    return (\r\n      <div className=\"mt-4 p-4 rounded bg-white/90 space-y-4\">\r\n        <section>\r\n          {(() => {\r\n            const score = computeCompatibilityScore(yours.name, partner.name, compatibility)\r\n            const primary = perspective === 'partner' ? partner : yours\r\n            const other = perspective === 'partner' ? yours : partner\r\n            return (\r\n              <div className=\"rounded-lg p-4 bg-gradient-to-tr from-white to-gray-50 border\">\r\n                <div className=\"flex flex-col md:flex-row items-start gap-4\">\r\n                  <div className=\"flex-none\">\r\n                      <div className=\"w-28 h-28 md:w-36 md:h-36 rounded-full flex items-center justify-center bg-gradient-to-tr from-pink-400 to-purple-600 text-white text-2xl md:text-3xl font-bold shadow\">{score}%</div>\r\n                    </div>\r\n\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <h3 className=\"font-semibold text-lg\">How You Two Feel Together</h3>\r\n                      {perspective === 'partner' ? <div className=\"text-xs text-indigo-600\">Viewing: Partner‚Äôs perspective</div> : null}\r\n                    </div>\r\n                    <div className=\"text-sm text-gray-600 mt-1\">{scoreMessage(score)}</div>\r\n\r\n                    <div className=\"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3\">\r\n                      <div className=\"p-3 rounded bg-white border\">\r\n                        <div className=\"font-semibold flex items-center gap-2\"><span className=\"text-xl\">‚ú®</span> When it‚Äôs good</div>\r\n                        <ul className=\"mt-2 list-disc list-inside text-sm space-y-1\">\r\n                          <li>{toneChoice === 'new' ? 'You two are full of warm curiosity ‚Äî everything feels possible and tender.' : toneChoice === 'confused' ? 'You catch small moments of connection; clarity is beginning to appear.' : toneChoice === 'fight' ? 'You love deeply ‚Äî even when one of you acts tough, the care runs beneath the surface.' : toneChoice === 'grow' ? 'You are learning each other; steady practice is bringing hopeful change.' : 'You two love and care for each other ‚Äî there is a steady, loyal warmth here.'}</li>\r\n                        </ul>\r\n                      </div>\r\n\r\n                      <div className=\"p-3 rounded bg-white border\">\r\n                        <div className=\"font-semibold flex items-center gap-2\"><span className=\"text-xl\">‚ö†Ô∏è</span> When it‚Äôs hard</div>\r\n                        <ul className=\"mt-2 list-disc list-inside text-sm space-y-1\">\r\n                          <li>{toneChoice === 'new' ? 'Excitement or nerves can make small missteps feel bigger than they are.' : toneChoice === 'confused' ? 'Mixed signals can create doubt ‚Äî gentle clarifying questions help you reconnect.' : toneChoice === 'fight' ? 'One of you moves faster while the other needs reassurance ‚Äî feelings can get louder than words.' : toneChoice === 'grow' ? 'Old patterns surface under stress; keep leaning into small check-ins and agreed practices.' : 'Sometimes you move at different speeds; naming needs helps you bridge the gap.'}</li>\r\n                        </ul>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"mt-3 text-xs italic text-gray-600\">This isn‚Äôt incompatibility ‚Äî it‚Äôs learning each other‚Äôs pace.</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )\r\n          })()}\r\n        </section>\r\n\r\n        <section>\r\n          <div className=\"flex flex-col gap-4\">\r\n            <div className=\"flex items-center my-2\">\r\n              <div className=\"flex-1 h-px bg-gray-200\"></div>\r\n              <div className=\"px-3 text-xs text-gray-400 font-medium\">Strengths</div>\r\n              <div className=\"flex-1 h-px bg-gray-200\"></div>\r\n            </div>\r\n\r\n            <div className=\"p-4 rounded bg-white/95 border\">\r\n              <div className=\"flex items-start gap-3\">\r\n                <div className=\"text-2xl\">‚ù§Ô∏è</div>\r\n                <div>\r\n                  <div className=\"font-semibold\">Strengths</div>\r\n                  <div className=\"mt-2 text-sm text-slate-700\">Passion + emotional insight{focusChoice === 'trust' ? ' ‚Äî a reliable anchor when you show care.' : ''}</div>\r\n                  <div className=\"mt-2 text-sm text-slate-700\">Steady loyalty and follow-through{focusChoice === 'future' ? ' ‚Äî a base for planning together.' : ''}</div>\r\n                  <div className=\"mt-2 text-sm text-slate-700\">Shared sense of ‚Äúwe‚Äôre in this together‚Äù{focusChoice === 'communication' ? ' ‚Äî nurture this with curious questions.' : ''}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center my-2\">\r\n              <div className=\"flex-1 h-px bg-gray-200\"></div>\r\n              <div className=\"px-3 text-xs text-gray-400 font-medium\">Challenges</div>\r\n              <div className=\"flex-1 h-px bg-gray-200\"></div>\r\n            </div>\r\n\r\n            <div className=\"p-4 rounded bg-white/95 border\">\r\n              <div className=\"flex items-start gap-3\">\r\n                <div className=\"text-2xl\">‚ö°</div>\r\n                <div>\r\n                  <div className=\"font-semibold\">Challenges</div>\r\n                  <ul className=\"mt-2 list-disc ml-5 text-sm space-y-1 text-slate-700\">\r\n                    <li>Fast reactions can clash with deep feelings</li>\r\n                    <li>Assuming instead of naming your needs</li>\r\n                    <li>Different processing speeds under stress</li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center my-2\">\r\n              <div className=\"flex-1 h-px bg-gray-200\"></div>\r\n              <div className=\"px-3 text-xs text-gray-400 font-medium\">Plan</div>\r\n              <div className=\"flex-1 h-px bg-gray-200\"></div>\r\n            </div>\r\n\r\n            <div className=\"p-4 rounded bg-white/95 border\">\r\n              <div className=\"flex items-start gap-3\">\r\n                <div className=\"text-2xl\">üå±</div>\r\n                <div>\r\n                  <div className=\"font-semibold\">Growth ‚Äî 4-week starter</div>\r\n                  <ol className=\"list-decimal ml-5 mt-2 text-sm text-slate-700 space-y-1\">\r\n                    <li><strong>Week 1</strong> ‚Äî Curiosity: short daily questions to open conversation.</li>\r\n                    <li><strong>Week 2</strong> ‚Äî Ritual: small shared routines to build reliability.</li>\r\n                    <li><strong>Week 3</strong> ‚Äî Pause & express: name needs before reacting.</li>\r\n                    <li><strong>Week 4</strong> ‚Äî Gratitude: nightly appreciation to stabilize warmth.</li>\r\n                  </ol>\r\n                  <div className=\"mt-2 text-xs text-gray-600\">Tip: pick one micro-habit from Week 1 and practice it daily.</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Emotional Regulation moved out as its own full-width block (stacked, not columns) */}\r\n          <div className=\"mt-4 p-4 rounded bg-white/95 border\">\r\n            <div className=\"font-semibold\">Emotional Regulation ‚Äî Practical</div>\r\n            <div className=\"mt-3 flex flex-col gap-3\">\r\n              {(() => {\r\n                const yoursPsych = psychRegulationForElement(yours?.element)\r\n                const partnerPsych = psychRegulationForElement(partner?.element)\r\n                return (\r\n                  <>\r\n                    <div className=\"p-3 rounded bg-white/50 border\">\r\n                      <div className=\"font-semibold\">You ‚Äî {yours?.name || 'You'}</div>\r\n                      <div className=\"text-xs italic mt-1 text-slate-600\">{yoursPsych.why}</div>\r\n                      <ul className=\"mt-2 list-disc ml-5 text-sm text-slate-700 space-y-1\">\r\n                        {yoursPsych.practices.map((p: string, i: number) => (\r\n                          <li key={i}>{p}</li>\r\n                        ))}\r\n                      </ul>\r\n                    </div>\r\n\r\n                    <div className=\"p-3 rounded bg-white/50 border\">\r\n                      <div className=\"font-semibold\">Partner ‚Äî {partner?.name || 'Partner'}</div>\r\n                      <div className=\"text-xs italic mt-1 text-slate-600\">{partnerPsych.why}</div>\r\n                      <ul className=\"mt-2 list-disc ml-5 text-sm text-slate-700 space-y-1\">\r\n                        {partnerPsych.practices.map((p: string, i: number) => (\r\n                          <li key={i}>{p}</li>\r\n                        ))}\r\n                      </ul>\r\n                    </div>\r\n                  </>\r\n                )\r\n              })()}\r\n\r\n              <div className=\"text-xs text-gray-600\">This blends emotional-intelligence research with sign-level tendencies ‚Äî practical, evidence-informed ideas rather than predictions.</div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        <section>\r\n          <h4 className=\"font-semibold\">üí´ Micro-Reflection</h4>\r\n          <p className=\"mt-2\">How this relationship often feels:</p>\r\n          <ul className=\"mt-2 list-disc ml-5\">\r\n            <li>‚ù§Ô∏è Warm & intense</li>\r\n            <li>üî• Passionate & alive</li>\r\n            <li>üåß Stormy when misunderstood</li>\r\n          </ul>\r\n          <p className=\"mt-2 italic\">Two different languages ‚Äî one real love.</p>\r\n        </section>\r\n\r\n        <section className=\"mt-4\">\r\n          <div className=\"font-semibold\">Want to improve communication this week?</div>\r\n          <p className=\"text-sm mt-1\">Get a gentle 3-day mini plan tailored to your focus to turn small practice into real change.</p>\r\n          <div className=\"mt-3 flex flex-col sm:flex-row gap-2\">\r\n            <button onClick={()=>generate3DayMiniPlan(focusChoice, toneChoice)} className=\"px-3 py-2 rounded bg-pink-500 text-white text-sm w-full sm:w-auto\">Get 3-day mini plan</button>\r\n            <button onClick={()=>{ setMiniPlan(null) }} className=\"px-3 py-2 rounded bg-gray-200 text-sm w-full sm:w-auto\">Clear</button>\r\n          </div>\r\n\r\n          {miniPlan ? (\r\n            <div id=\"mini-plan-card\" className=\"mt-3 p-3 rounded bg-white/95 text-sm space-y-2\">\r\n              {miniPlan.map((item, idx) => (\r\n                <div key={idx}><strong>Day {idx+1}:</strong> {item}</div>\r\n              ))}\r\n            </div>\r\n          ) : null}\r\n        </section>\r\n\r\n        <section>\r\n          <h4 className=\"font-semibold\">üåô Curious About a Deeper Layer?</h4>\r\n          <p className=\"mt-2\">Unlock moon & rising signs (optional) to understand emotional needs & communication style more accurately.</p>\r\n        </section>\r\n\r\n        <section>\r\n          <p className=\"mt-2 font-medium\">Love isn‚Äôt about perfect matching ‚Äî it‚Äôs about learning each other. You two have real potential. Handle with care, not speed.</p>\r\n        </section>\r\n        <section className=\"mt-4\">\r\n          <div className=\"font-semibold\">Before you leave‚Ä¶ How did this feel?</div>\r\n          <p className=\"text-sm mt-1 text-gray-600\">Your quick answer helps us improve the experience.</p>\r\n          <div className=\"mt-3 flex flex-col sm:flex-row gap-2\">\r\n            {['Accurate','Made me think','I learned something new','Hmm not sure'].map((opt)=>{\r\n              const active = reflection === opt\r\n              return (\r\n                <button key={opt} onClick={()=>{ setReflection(opt); setReflectionSubmitted(true); saveReflection(opt, { yours, partner, compatibility, tone: toneChoice, focus: focusChoice }) }} className={`px-3 py-2 rounded border text-sm ${active ? 'bg-pink-100 border-pink-300' : 'bg-white'}`}>\r\n                  {opt}\r\n                </button>\r\n              )\r\n            })}\r\n          </div>\r\n          {reflectionSubmitted ? (\r\n            <div className=\"mt-2 text-xs text-green-700\">Thanks ‚Äî your answer was saved for this session.</div>\r\n          ) : null}\r\n        </section>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  function elementSpeak(el: string){\r\n    switch(el){\r\n      case 'Fire': return 'initiative and warmth'\r\n      case 'Earth': return 'stability and care'\r\n      case 'Air': return 'ideas and curious conversation'\r\n      case 'Water': return 'emotional depth and empathy'\r\n      default: return 'a unique quality'\r\n    }\r\n  }\r\n\r\n  function elementAccent(element?: string){\r\n    if(!element) return 'bg-gradient-to-tr from-gray-200 to-gray-300 text-gray-800'\r\n    switch(element.toLowerCase()){\r\n      case 'fire': return 'bg-gradient-to-tr from-orange-300 to-pink-400 text-white'\r\n      case 'water': return 'bg-gradient-to-tr from-blue-300 to-indigo-400 text-white'\r\n      case 'air': return 'bg-gradient-to-tr from-sky-300 to-emerald-300 text-white'\r\n      case 'earth': return 'bg-gradient-to-tr from-emerald-300 to-lime-300 text-white'\r\n      default: return 'bg-gradient-to-tr from-gray-200 to-gray-300 text-gray-800'\r\n    }\r\n  }\r\n\r\n  function computeCompatibilityScore(signA: string, signB: string, compatibility: any){\r\n    // Base score\r\n    let score = 60\r\n    const same = signA === signB\r\n    if(same) score += 20\r\n\r\n    // Map zodiac sign -> element using shared helper\r\n    const elemA = signToElement(signA)\r\n    const elemB = signToElement(signB)\r\n\r\n    // boost/deduct based on wording in compatibility.summary\r\n    const s = (compatibility && compatibility.summary) ? String(compatibility.summary).toLowerCase() : ''\r\n    if(s.includes('harmonious') || s.includes('harmonic')) score += 10\r\n    if(s.includes('high energy') || s.includes('creative spark')) score += 5\r\n    if(s.includes('stable') || s.includes('nurturing')) score += 5\r\n    if(s.includes('tension') || s.includes('clashes') || s.includes('conflicts')) score -= 10\r\n    if(s.includes('miscommunications')) score -= 5\r\n\r\n    // element-based heuristics (use elements, not sign strings)\r\n    if(elemA && elemB){\r\n      if(elemA === elemB && !same) score += 8 // same element tends to feel naturally compatible\r\n      const fireAir = (elemA === 'Fire' || elemA === 'Air' || elemB === 'Fire' || elemB === 'Air')\r\n      if(fireAir && elemA !== elemB) score += 5\r\n    }\r\n\r\n    // clamp\r\n    if(score < 30) score = 30\r\n    if(score > 95) score = 95\r\n    return Math.round(score)\r\n  }\r\n\r\n  function scoreMessage(score: number){\r\n    if(score >= 85) return 'Radiant synergy ‚Äî there‚Äôs a joyful spark and reliable warmth when you show up for each other.'\r\n    if(score >= 70) return 'Strong potential ‚Äî with patient communication this connection can deepen beautifully.'\r\n    if(score >= 55) return 'Balanced ‚Äî good chemistry, some work needed to bridge differences; small rituals help.'\r\n    if(score >= 40) return 'Tender work required ‚Äî there‚Äôs real feeling, but you‚Äôll need steady practices to stay close.'\r\n    return 'Fragile but real ‚Äî approach gently, name needs often, and celebrate small wins.'\r\n  }\r\n\r\n  // Psychology + EI layer: element-aware regulation tips\r\n  function psychRegulationForElement(element?: string){\r\n    switch((element||'').toLowerCase()){\r\n      case 'fire':\r\n        return {\r\n          title: 'Move & Express',\r\n          why: 'Fire signs often regulate by releasing energy through movement and direct expression.',\r\n          practices: [\r\n            'Daily short bursts of movement (walk, dance, push-ups) to shift intensity.',\r\n            'Speak your feelings in short, concrete ‚ÄúI feel‚Ä¶ because‚Ä¶‚Äù statements.'\r\n          ]\r\n        }\r\n      case 'water':\r\n        return {\r\n          title: 'Validate & Name Emotions',\r\n          why: 'Water signs soothe through being seen and naming emotional states.',\r\n          practices: [\r\n            'Name the feeling: ‚ÄúI‚Äôm feeling X right now‚Äù and invite the partner to mirror it.',\r\n            'Use gentle validation language: ‚ÄúThat makes sense ‚Äî I get why you‚Äôd feel that.‚Äù'\r\n          ]\r\n        }\r\n      case 'air':\r\n        return {\r\n          title: 'Reflect & Reframe',\r\n          why: 'Air signs regulate with language, labeling thoughts and creating mental distance.',\r\n          practices: [\r\n            'Try thought-labeling: ‚ÄúThat thought is just one possible story.‚Äù',\r\n            'Use a short 3-minute discussion to clarify meanings and reduce misinterpretation.'\r\n          ]\r\n        }\r\n      case 'earth':\r\n        return {\r\n          title: 'Ground & Routine',\r\n          why: 'Earth signs find safety in steady routines and predictable acts of care.',\r\n          practices: [\r\n            'Create a small reliable ritual (shared check-in, a daily message) to build trust.',\r\n            'Use grounding techniques: 5 senses check, steady breathing, and small tasks.'\r\n          ]\r\n        }\r\n      default:\r\n        return {\r\n          title: 'Simple Regulation',\r\n          why: 'Different people find different paths ‚Äî try naming needs, a short pause, or a small ritual.',\r\n          practices: [\r\n            'Pause for 3 deep breaths before responding.',\r\n            'Name one need and one small action that would help.'\r\n          ]\r\n        }\r\n    }\r\n  }\r\n\r\n  function generate3DayMiniPlan(focusChoice: string, toneChoice: string){\r\n    // Create gentle 3-day micro-tasks tailored to focus and tone\r\n    const plan: string[] = []\r\n    if(focusChoice === 'communication'){\r\n      plan.push('Day 1 ‚Äî 10-minute curiosity check-in: each person shares one highlight and one small worry.')\r\n      plan.push('Day 2 ‚Äî Active listening practice: one speaks for 3 minutes while the other paraphrases back.')\r\n      plan.push('Day 3 ‚Äî Appreciation note: each shares one thing the other did that felt supportive this week.')\r\n    } else if(focusChoice === 'trust'){\r\n      plan.push('Day 1 ‚Äî Small reliability act: pick one tiny promise and complete it.')\r\n      plan.push('Day 2 ‚Äî Share a low-stakes vulnerability and one concrete way the partner can help.')\r\n      plan.push('Day 3 ‚Äî A brief ritual: confirm one plan for the week and one accountability step.')\r\n    } else if(focusChoice === 'future'){\r\n      plan.push('Day 1 ‚Äî List one shared value and one small step toward it.')\r\n      plan.push('Day 2 ‚Äî Mini planning session: allocate 15 minutes to brainstorm one joint goal.')\r\n      plan.push('Day 3 ‚Äî Commit to one tiny shared action and schedule it in calendar.')\r\n    } else if(focusChoice === 'needs'){\r\n      plan.push('Day 1 ‚Äî Name one need each and a small way the partner can offer it.')\r\n      plan.push('Day 2 ‚Äî Practice asking for what you need in a specific, concrete way.')\r\n      plan.push('Day 3 ‚Äî Reflect together: what worked and what felt safe?')\r\n    } else {\r\n      plan.push('Day 1 ‚Äî Quick curiosity check-in: share one thing that mattered today.')\r\n      plan.push('Day 2 ‚Äî Small appreciative action: say thank you and name why.')\r\n      plan.push('Day 3 ‚Äî Plan one tiny shared moment (10 minutes) to connect.')\r\n    }\r\n\r\n    // tone can slightly tweak wording (softly)\r\n    if(toneChoice === 'fight'){\r\n      for(let i=0;i<plan.length;i++) plan[i] = plan[i].replace(/\\b(you|each)\\b/gi, 'you both')\r\n    } else if(toneChoice === 'new'){\r\n      plan[0] = 'Day 1 ‚Äî A gentle curiosity check: ask one open question and listen.'\r\n    }\r\n\r\n    setMiniPlan(plan)\r\n    // scroll to plan (small UX nicety)\r\n    setTimeout(()=>{\r\n      const el = document.getElementById('mini-plan-card')\r\n      if(el) el.scrollIntoView({ behavior: 'smooth', block: 'center' })\r\n    }, 120)\r\n  }\r\n\r\n  function makeSimpleSignGlyph(sign: string){\r\n    // Use short label for signs; emoji fallback\r\n    const glyphs: Record<string,string> = {\r\n      Aries: '‚ôà', Taurus: '‚ôâ', Gemini: '‚ôä', Cancer: '‚ôã', Leo: '‚ôå', Virgo: '‚ôç', Libra: '‚ôé', Scorpio: '‚ôè', Sagittarius: '‚ôê', Capricorn: '‚ôë', Aquarius: '‚ôí', Pisces: '‚ôì'\r\n    }\r\n    return glyphs[sign] || sign.slice(0,2)\r\n  }\r\n\r\n  function buildShareSVG(data: any){\r\n    const width = 1200\r\n    const height = 630\r\n    const yours = data.yours || { name: '‚Äî' }\r\n    const partner = data.partner || { name: '‚Äî' }\r\n    const score = computeCompatibilityScore(yours.name, partner.name, data.compatibility || {})\r\n    const phrase = scoreMessage(score)\r\n\r\n    const bg = `linear-gradient(135deg,#fff7fb 0%,#fef6e6 100%)`\r\n\r\n    // simple SVG with zodiac glyphs, names, score and phrase\r\n    const svg = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n  <svg xmlns='http://www.w3.org/2000/svg' width='${width}' height='${height}' viewBox='0 0 ${width} ${height}'>\r\n    <defs>\r\n      <style><![CDATA[\r\n        .title{font:700 42px/1.1 Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; fill:#111827}\r\n        .score{font:700 60px/1 Inter, system-ui; fill:#c026d3}\r\n        .sub{font:400 20px/1 Inter, system-ui; fill:#374151}\r\n        .small{font:400 16px/1 Inter, system-ui; fill:#6b7280}\r\n      ]]></style>\r\n    </defs>\r\n    <rect width='100%' height='100%' rx='24' fill='#fff' />\r\n    <g>\r\n      <rect x='36' y='36' width='${width-72}' height='${height-72}' rx='18' fill='#fff' stroke='#f3e8ff' stroke-width='2'/>\r\n      <text x='80' y='110' class='title'>SoulMatch</text>\r\n      <text x='80' y='165' class='sub'>${escapeXml(yours.name)} √ó ${escapeXml(partner.name)}</text>\r\n\r\n      <g transform='translate(80,200)'>\r\n        <circle cx='60' cy='60' r='56' fill='#fff0f6' stroke='#fecaca' stroke-width='2'/>\r\n        <text x='60' y='78' text-anchor='middle' font-size='42' fill='#b91c1c'>${escapeXml(makeSimpleSignGlyph(yours.name))}</text>\r\n        <text x='60' y='120' text-anchor='middle' class='small'>${escapeXml(yours.name)}</text>\r\n\r\n        <rect x='160' y='18' width='420' height='160' rx='12' fill='#faf5ff' stroke='#e9d5ff' />\r\n        <text x='360' y='80' text-anchor='middle' class='score'>${score}%</text>\r\n        <text x='360' y='110' text-anchor='middle' class='sub' fill='#4b5563'>Compatibility Energy</text>\r\n      </g>\r\n\r\n      <g transform='translate(640,200)'>\r\n        <circle cx='60' cy='60' r='56' fill='#f0fdf4' stroke='#bbf7d0' stroke-width='2'/>\r\n        <text x='60' y='78' text-anchor='middle' font-size='42' fill='#065f46'>${escapeXml(makeSimpleSignGlyph(partner.name))}</text>\r\n        <text x='60' y='120' text-anchor='middle' class='small'>${escapeXml(partner.name)}</text>\r\n      </g>\r\n\r\n      <foreignObject x='80' y='380' width='1040' height='200'>\r\n        <div xmlns='http://www.w3.org/1999/xhtml' style='font-family: Inter, system-ui; color:#374151; font-size:20px; line-height:1.3;'>\r\n          <div style='font-weight:600; margin-bottom:8px;'>${escapeXml(phrase)}</div>\r\n          <div style='color:#6b7280; font-size:16px;'>‚Äú${escapeXml((data.compatibility && data.compatibility.summary) || 'Different rhythms, but a strong pull.') }‚Äù</div>\r\n        </div>\r\n      </foreignObject>\r\n    </g>\r\n  </svg>`\r\n    return svg\r\n  }\r\n\r\n  function escapeXml(s: string){\r\n    return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/\"/g,'&quot;')\r\n  }\r\n\r\n  async function svgToPngBlob(svg: string, width = 1200, height = 630){\r\n    return await new Promise<Blob | null>((resolve)=>{\r\n      const img = new Image()\r\n      const svg64 = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svg)\r\n      img.onload = ()=>{\r\n        try{\r\n          const c = document.createElement('canvas')\r\n          c.width = width\r\n          c.height = height\r\n          const ctx = c.getContext('2d')\r\n          if(!ctx){ resolve(null); return }\r\n          ctx.fillStyle = '#fff'\r\n          ctx.fillRect(0,0,width,height)\r\n          ctx.drawImage(img,0,0,width,height)\r\n          c.toBlob((b)=>resolve(b), 'image/png')\r\n        }catch(e){ resolve(null) }\r\n      }\r\n      img.onerror = ()=> resolve(null)\r\n      img.src = svg64\r\n    })\r\n  }\r\n\r\n  async function createShareCard(data: any){\r\n    setSharing(true)\r\n    try{\r\n      const svg = buildShareSVG(data)\r\n      setShareSvg(svg)\r\n      const blob = await svgToPngBlob(svg)\r\n      if(blob){\r\n        const url = URL.createObjectURL(blob)\r\n        if(shareImgUrl) URL.revokeObjectURL(shareImgUrl)\r\n        setShareImgUrl(url)\r\n      }\r\n    }finally{\r\n      setSharing(false)\r\n    }\r\n  }\r\n\r\n  async function downloadShare(){\r\n    if(!shareImgUrl) return\r\n    const a = document.createElement('a')\r\n    a.href = shareImgUrl\r\n    a.download = 'soulmatch-card.png'\r\n    document.body.appendChild(a)\r\n    a.click()\r\n    a.remove()\r\n  }\r\n\r\n  async function copyShareImage(){\r\n    if(!shareImgUrl) return false\r\n    try{\r\n      const r = await fetch(shareImgUrl)\r\n      const b = await r.blob()\r\n      // try Clipboard API\r\n      // @ts-ignore\r\n      if(navigator.clipboard && (window as any).ClipboardItem){\r\n        // @ts-ignore\r\n        await navigator.clipboard.write([new ClipboardItem({ 'image/png': b })])\r\n        return true\r\n      }\r\n    }catch(e){ /* ignore */ }\r\n    return false\r\n  }\r\n\r\n  // cleanup object URL when it changes/unmounts\r\n  useEffect(()=>{\r\n    return ()=>{\r\n      if(shareImgUrl) URL.revokeObjectURL(shareImgUrl)\r\n    }\r\n  }, [shareImgUrl])\r\n\r\n  function saveReflection(choice: string, snapshot: any){\r\n    try{\r\n      const key = 'soulmatch_reflections'\r\n      const now = new Date().toISOString()\r\n      const entry = { choice, timestamp: now, snapshot }\r\n      const raw = sessionStorage.getItem(key)\r\n      const arr = raw ? JSON.parse(raw) : []\r\n      arr.push(entry)\r\n      sessionStorage.setItem(key, JSON.stringify(arr))\r\n    }catch(e){\r\n      // ignore storage errors\r\n      console.warn('Failed to save reflection', e)\r\n    }\r\n  }\r\n\r\n  function handleCheck(e: React.FormEvent){\r\n    e.preventDefault()\r\n    setResult(null)\r\n    // show soft reading animation before computing\r\n    if(loadingRef.current){\r\n      window.clearTimeout(loadingRef.current)\r\n      loadingRef.current = null\r\n    }\r\n    const yourDt = parseDateInput(yourDobRaw)\r\n    const partnerDt = parseDateInput(partnerDobRaw)\r\n\r\n    const yours = yourDt ? getZodiacFromDate(yourDt) : null\r\n\r\n    let partner: any = null\r\n    if(partnerSign){\r\n      partner = { name: partnerSign, element: undefined, insight: '' }\r\n    } else if(partnerDt){\r\n      partner = getZodiacFromDate(partnerDt)\r\n    }\r\n\r\n    if(!yours || !partner){\r\n      setResult({ error: 'Please provide your DOB and either a partner DOB or pick their sign. Use dd-mm-yyyy or yyyy-mm-dd.' })\r\n      return\r\n    }\r\n\r\n    // Start loading animation and compute after 1.5s\r\n    setLoading(true)\r\n    loadingRef.current = window.setTimeout(()=>{\r\n      (async ()=>{\r\n        try{\r\n          const compatibility = getCompatibility(yours.name, partner.name)\r\n\r\n          // compute moon/rising if unlocked and we have time + coords\r\n          let deep: any = null\r\n          try{\r\n            if(unlockDeep && timeRaw && coordsRaw && yourDt){\r\n              const tmatch = /^([0-2]\\d):([0-5]\\d)$/.exec(timeRaw)\r\n              let lat: number | null = null\r\n              let lon: number | null = null\r\n\r\n              // first try lat,lon inline\r\n              const cmatch = /(-?\\d+(?:\\.\\d+)?),\\s*(-?\\d+(?:\\.\\d+)?)/.exec(coordsRaw)\r\n              if(cmatch){\r\n                lat = Number(cmatch[1])\r\n                lon = Number(cmatch[2])\r\n              } else {\r\n                // attempt client-side geocoding of place name\r\n                const resolved = await resolveCoordsFromPlace(coordsRaw)\r\n                if(resolved){ lat = resolved.lat; lon = resolved.lon }\r\n              }\r\n\r\n              if(tmatch && lat !== null && lon !== null){\r\n                const hour = Number(tmatch[1])\r\n                const minute = Number(tmatch[2])\r\n\r\n                // approximate timezone offset from longitude\r\n                const tzOffsetHours = Math.round(lon / 15)\r\n                // use yourDt which is a Date (UTC midnight for the day); build UTC date\r\n                const year = yourDt.getUTCFullYear()\r\n                const month = yourDt.getUTCMonth()\r\n                const day = yourDt.getUTCDate()\r\n                const utcDate = new Date(Date.UTC(year, month, day, hour - tzOffsetHours, minute || 0, 0))\r\n                const JD = toJulianDay(utcDate)\r\n                const moonLon = moonEclipticLongitudeDeg(JD)\r\n                const asc = ascendantDeg(JD, lat, lon)\r\n                deep = { moon: zodiacFromDegrees(moonLon), asc: zodiacFromDegrees(asc) }\r\n              }\r\n            }\r\n          }catch(e){ /* ignore deep calc errors */ }\r\n\r\n          setResult({ yours, partner, compatibility, deep, tone, focus })\r\n        }finally{\r\n          setLoading(false)\r\n          loadingRef.current = null\r\n        }\r\n      })()\r\n    }, 1500)\r\n  }\r\n\r\n  useEffect(()=>{\r\n    return ()=>{\r\n      if(loadingRef.current) window.clearTimeout(loadingRef.current)\r\n    }\r\n  },[])\r\n\r\n  return (\r\n    <div className=\"w-full min-h-screen bg-gray-50 py-10 px-6\">\r\n      <div className=\"mx-auto w-full max-w-5xl\">\r\n      <h2 className=\"text-3xl font-extrabold mb-1\">\r\n        <span className=\"bg-clip-text text-transparent bg-gradient-to-r from-pink-600 via-purple-600 to-indigo-700\">SoulMatch</span>\r\n        <span className=\"ml-2 text-base font-medium text-gray-700\">‚Äî Understand Your Connection, Deeply</span>\r\n      </h2>\r\n      <p className=\"soft-microcopy text-gray-600\">A gentle, colorful space to explore how you complement each other ‚Äî not predictions, but clarity & growth.</p>\r\n\r\n      {/* Emotional hook + tone buttons */}\r\n      <div className=\"mt-4 p-3 rounded-lg\" style={{background: 'linear-gradient(90deg, rgba(252,231,243,0.6), rgba(237,233,255,0.6))', boxShadow: '0 6px 18px rgba(15,23,42,0.04)'}}>\r\n        <div className=\"font-medium\">What are you exploring today?</div>\r\n        <div className=\"mt-2 flex gap-2 flex-wrap\">\r\n          <button type=\"button\" onClick={()=>setTone('new')} className={`px-3 py-1 rounded ${tone==='new'?'bg-gradient-to-tr from-pink-300 to-pink-500 text-white':'bg-white/90'}`}>üíï New connection</button>\r\n          <button type=\"button\" onClick={()=>setTone('confused')} className={`px-3 py-1 rounded ${tone==='confused'?'bg-gradient-to-tr from-pink-300 to-pink-500 text-white':'bg-white/90'}`}>ü•∫ We‚Äôre confused</button>\r\n          <button type=\"button\" onClick={()=>setTone('fight')} className={`px-3 py-1 rounded ${tone==='fight'?'bg-gradient-to-tr from-orange-300 to-pink-400 text-white':'bg-white/90'}`}>üíî After a fight</button>\r\n          <button type=\"button\" onClick={()=>setTone('grow')} className={`px-3 py-1 rounded ${tone==='grow'?'bg-gradient-to-tr from-emerald-300 to-lime-400 text-white':'bg-white/90'}`}>üå± We‚Äôre trying to grow</button>\r\n        </div>\r\n        <div className=\"mt-2 text-xs text-gray-600\">Selecting one slightly changes the tone of the results, so you feel understood.</div>\r\n      </div>\r\n\r\n      {/* Small reflection micro-input to personalize the reading */}\r\n      <div className=\"mt-3 p-3 rounded bg-white/90\">\r\n        <div className=\"font-medium\">What do you want to understand better?</div>\r\n        <div className=\"mt-2 flex gap-2 flex-wrap\">\r\n              <button type=\"button\" onClick={()=>setFocus('communication')} className={`px-3 py-1 rounded ${focus==='communication'?'bg-gradient-to-tr from-sky-200 to-pink-200 text-white':'bg-white/90'}`}>‚óã Communication</button>\r\n            <button type=\"button\" onClick={()=>setFocus('trust')} className={`px-3 py-1 rounded ${focus==='trust'?'bg-gradient-to-tr from-emerald-200 to-emerald-400 text-white':'bg-white/90'}`}>‚óã Trust & security</button>\r\n            <button type=\"button\" onClick={()=>setFocus('future')} className={`px-3 py-1 rounded ${focus==='future'?'bg-gradient-to-tr from-yellow-200 to-orange-300 text-white':'bg-white/90'}`}>‚óã Future direction</button>\r\n            <button type=\"button\" onClick={()=>setFocus('needs')} className={`px-3 py-1 rounded ${focus==='needs'?'bg-gradient-to-tr from-indigo-200 to-sky-300 text-white':'bg-white/90'}`}>‚óã Emotional needs</button>\r\n        </div>\r\n        <div className=\"mt-2 text-xs text-gray-600\">Selecting this slightly tailors the wording and the suggested practices so it feels more personal.</div>\r\n      </div>\r\n\r\n      <form className=\"mt-4 space-y-3\" onSubmit={handleCheck} aria-label=\"SoulMatch form\">\r\n        <div>\r\n          <label htmlFor=\"yourDob\" className=\"block text-sm\">Your Birthday üéÇ</label>\r\n          <input id=\"yourDob\" value={yourDobRaw} onChange={e=>setYourDobRaw(e.target.value)} placeholder=\"dd-mm-yyyy (e.g. 15-08-1990)\" className=\"mt-1 rounded-md p-2 w-full\" pattern=\"\\d{2}-\\d{2}-\\d{4}\" inputMode=\"numeric\" aria-describedby=\"yourDobHelp\" />\r\n          <div id=\"yourDobHelp\" className=\"text-xs text-gray-600 mt-1\">So we understand your natural energy. Format: <code>dd-mm-yyyy</code>.</div>\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor=\"partnerDob\" className=\"block text-sm\">Their Birthday üíï</label>\r\n          <input id=\"partnerDob\" value={partnerDobRaw} onChange={e=>setPartnerDobRaw(e.target.value)} placeholder=\"dd-mm-yyyy (e.g. 05-05-1988)\" className=\"mt-1 rounded-md p-2 w-full\" pattern=\"\\d{2}-\\d{2}-\\d{4}\" inputMode=\"numeric\" aria-describedby=\"partnerDobHelp\" />\r\n          <div id=\"partnerDobHelp\" className=\"text-xs text-gray-600 mt-1\">To see how your energies interact. You can also pick their sun sign.</div>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm\">or choose their sun-sign</label>\r\n          <select value={partnerSign} onChange={e=>setPartnerSign(e.target.value)} className=\"mt-1 rounded-md p-2 w-full\">\r\n            <option value=\"\">-- pick --</option>\r\n            {SIGNS.map(s => (\r\n              <option key={s} value={s}>{s}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor=\"birthTime\" className=\"block text-sm\">Birth Time (optional)</label>\r\n          <input id=\"birthTime\" value={timeRaw} onChange={e=>setTimeRaw(e.target.value)} placeholder=\"HH:MM (24h) e.g. 07:30\" className=\"mt-1 rounded-md p-2 w-full\" pattern=\"([01]\\d|2[0-3]):[0-5]\\d\" inputMode=\"numeric\" aria-describedby=\"birthTimeHelp\" />\r\n          <div id=\"birthTimeHelp\" className=\"text-xs text-gray-600 mt-1\">Provide local birth time to unlock Moon & Rising when used with coords. Format: <code>HH:MM</code>.</div>\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor=\"coords\" className=\"block text-sm\">Birth place (optional)</label>\r\n          <input id=\"coords\" value={coordsRaw} onChange={e=>setCoordsRaw(e.target.value)} placeholder=\"City, region or place name (e.g. New Delhi)\" className=\"mt-1 rounded-md p-2 w-full\" aria-describedby=\"coordsHelp\" />\r\n          <div id=\"coordsHelp\" className=\"text-xs text-gray-600 mt-1\">Type a location name ‚Äî we'll resolve coordinates & timezone for you (optional). Geocoding happens only when you ask to unlock deeper readings.</div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-3\">\r\n          <label className=\"flex items-center gap-2 text-sm\"><input type=\"checkbox\" checked={unlockDeep} onChange={e=>setUnlockDeep(e.target.checked)} /> <span>Unlock moon & rising (optional)</span></label>\r\n          <div className=\"text-xs text-gray-600\">Rising is time-sensitive. If you enable this, we estimate timezone from longitude (approx).</div>\r\n        </div>\r\n\r\n        <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center gap-3\">\r\n          <button type=\"submit\" className=\"large-cta w-full sm:w-auto shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition\" aria-label=\"Show our connection\">üåü Show Our Connection</button>\r\n        </div>\r\n      </form>\r\n\r\n      <div className=\"mt-3 text-xs text-gray-600\">No sign-in needed, nothing saved ‚Äî just honest insight for your heart.</div>\r\n\r\n      {loading && (\r\n        <div className=\"mt-6 p-6 rounded bg-white/90 text-center animate-pulse\">\r\n          <div className=\"text-lg font-medium\">Aligning stars‚Ä¶</div>\r\n          <div className=\"mt-2\">Listening to your energies‚Ä¶ ‚ú®</div>\r\n        </div>\r\n      )}\r\n\r\n      {result && (\r\n        result.error ? (\r\n          <div className=\"mt-4 p-4 rounded bg-white/90\"><p className=\"text-sm text-red-600\">{result.error}</p></div>\r\n        ) : (\r\n          <div>\r\n            {/* concise top summary for quick scan */}\r\n            <div className=\"mt-4 p-4 rounded-lg bg-white/95 shadow-md flex items-center justify-between gap-4\" style={{border: '1px solid rgba(203,213,225,0.6)'}}>\r\n              <div>\r\n                <div className=\"text-sm text-gray-500\">Compatibility Energy</div>\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"w-20 h-20 rounded-full flex items-center justify-center bg-gradient-to-tr from-pink-400 to-purple-600 text-white text-2xl font-bold\">{computeCompatibilityScore(result.yours.name, result.partner.name, result.compatibility)}%</div>\r\n                  <div>\r\n                    <div className=\"text-lg font-semibold\">{scoreMessage(computeCompatibilityScore(result.yours.name, result.partner.name, result.compatibility))}</div>\r\n                    <div className=\"text-xs text-gray-600 mt-1\">A soft, useful guide ‚Äî not a prediction.</div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"mt-2 text-xs text-gray-500 italic\">Compatibility energy is a reflective tool ‚Äî not a prediction or decision-making model.</div>\r\n              </div>\r\n              <div className=\"flex gap-2 items-center\">\r\n                <div className=\"px-2 py-1 bg-white rounded border text-xs\">Tone: {result.tone || tone || '‚Äî'}</div>\r\n                <div className=\"px-2 py-1 bg-white rounded border text-xs\">Focus: {result.focus || focus || '‚Äî'}</div>\r\n                <button onClick={()=>setPartnerPerspective(p=>!p)} className=\"ml-2 px-2 py-1 rounded bg-white border text-xs\">\r\n                  {partnerPerspective ? 'Viewing: Partner' : 'View Partner‚Äôs Perspective'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4\" aria-live=\"polite\">\r\n              <div className=\"col-span-1 p-4 rounded bg-white/90\">\r\n                <div className=\"font-semibold mb-3\">You</div>\r\n                <div className=\"mt-2 flex items-start gap-4\">\r\n                  <div className={`w-24 h-24 rounded-md overflow-hidden flex items-center justify-center ${elementAccent(result.yours?.element)}`}>\r\n                    {result.yours ? <ZodiacAvatar sign={result.yours.name} compact size={84} /> : null}\r\n                  </div>\r\n\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <div className=\"text-lg font-semibold\">{result.yours.name}</div>\r\n                      <div className=\"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-800\">{result.yours.element}</div>\r\n                    </div>\r\n\r\n                    <div className=\"mt-2 text-sm text-slate-700\">{result.yours.insight}</div>\r\n\r\n                    <div className=\"mt-3\">\r\n                      <div className=\"text-xs font-semibold text-slate-600\">Mini habit</div>\r\n                      <div className=\"text-sm text-slate-700 mt-1\">{result.yours.habit}</div>\r\n                    </div>\r\n\r\n                    {result.deep ? (\r\n                      <div className=\"mt-3 text-xs text-slate-600\">\r\n                        <div><strong>Moon:</strong> {result.deep.moon?.sign} {result.deep.moon ? `(${Math.round(result.deep.moon.deg)}¬∞)` : ''}</div>\r\n                        <div><strong>Rising:</strong> {result.deep.asc?.sign} {result.deep.asc ? `(${Math.round(result.deep.asc.deg)}¬∞)` : ''}</div>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-span-1 p-4 rounded bg-white/90\">\r\n                <div className=\"font-semibold\">Partner</div>\r\n                <div className=\"mt-2 flex items-center gap-3\">\r\n                  <div className={`w-12 h-12 rounded-full flex items-center justify-center ${elementAccent(result.partner?.element)}`}>{result.partner && result.partner.name ? <ZodiacAvatar sign={result.partner.name} /> : null}</div>\r\n                  <div>\r\n                    <div className=\"font-semibold\">{result.partner.name}</div>\r\n                    <div className=\"text-xs mt-1\">Element: {result.partner.element || '‚Äî'}</div>\r\n                    <div className=\"text-xs mt-1\">{result.partner.insight || ''}</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-span-1 p-4 rounded bg-white/90\">\r\n                <div className=\"font-semibold\">Energy Dynamic</div>\r\n                <div className=\"mt-2\">\r\n                  <blockquote className=\"italic text-sm\">‚Äú{result.compatibility.summary || 'Different rhythms, but a strong pull.'}‚Äù</blockquote>\r\n                  <div className=\"mt-3 font-semibold\">Compatibility Energy: {computeCompatibilityScore(result.yours.name, result.partner.name, result.compatibility)}% ‚Äî <span className=\"font-normal text-sm\">{scoreMessage(computeCompatibilityScore(result.yours.name, result.partner.name, result.compatibility))}</span></div>\r\n                  <div className=\"font-semibold mt-3\">Quick take</div>\r\n                  <p className=\"text-sm mt-1\">{result.compatibility.strengths}</p>\r\n                    <div className=\"mt-3 flex flex-col gap-2\">\r\n                      <div className=\"flex flex-wrap gap-2\">\r\n                        <button disabled={sharing} onClick={()=>createShareCard(result)} className=\"px-3 py-2 rounded bg-gradient-to-tr from-pink-500 to-purple-600 text-white text-sm shadow w-full sm:w-auto\">Create share card üíå</button>\r\n                        <button onClick={downloadShare} disabled={!shareImgUrl} className=\"px-3 py-2 rounded bg-white border text-sm w-full sm:w-auto\">Download PNG</button>\r\n                        <button onClick={async ()=>{ const ok = await copyShareImage(); setCopySuccess(ok ? 'Copied image to clipboard' : 'Copy failed in this browser'); setTimeout(()=>setCopySuccess(null),2500) }} disabled={!shareImgUrl} className=\"px-3 py-2 rounded bg-white border text-sm w-full sm:w-auto\">Copy image</button>\r\n                        {copySuccess ? <div className=\"text-xs text-green-600\">{copySuccess}</div> : null}\r\n                      </div>\r\n                      {sharing ? <div className=\"text-sm text-gray-500\">Creating your share card‚Ä¶</div> : null}\r\n                      {shareImgUrl ? (\r\n                        <div className=\"mt-2\">\r\n                          <div className=\"text-xs text-gray-600 mb-1\">Preview</div>\r\n                          <div className=\"w-full max-w-lg rounded overflow-hidden shadow-lg\">\r\n                            <img src={shareImgUrl} alt=\"Share preview\" className=\"w-full block\" />\r\n                          </div>\r\n                        </div>\r\n                      ) : null}\r\n                    </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-span-1 md:col-span-3\">\r\n                {buildReport(result.yours, result.partner, result.compatibility, result.tone || tone, result.focus || focus, partnerPerspective ? 'partner' : 'you')}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )\r\n      )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}